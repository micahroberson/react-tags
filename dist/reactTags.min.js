!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.ReactTags=t(require("React"),require("ReactDOM")):e.ReactTags=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(n){if(s[n])return s[n].exports;var o=s[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){"use strict";var n=s(1),o=(s(4),s(3)),r=s(2),i={ENTER:13,TAB:9,BACKSPACE:8,UP_ARROW:38,DOWN_ARROW:40,ESCAPE:27},a=n.createClass({displayName:"ReactTags",propTypes:{tags:n.PropTypes.array,placeholder:n.PropTypes.string,labelField:n.PropTypes.string,suggestions:n.PropTypes.array,delimeters:n.PropTypes.array,autofocus:n.PropTypes.bool,inline:n.PropTypes.bool,handleDelete:n.PropTypes.func.isRequired,handleAddition:n.PropTypes.func.isRequired,allowDeleteFromEmptyInput:n.PropTypes.bool,handleInputChange:n.PropTypes.func,minQueryLength:n.PropTypes.number,removeComponent:n.PropTypes.func,autocomplete:n.PropTypes.oneOfType([n.PropTypes.bool,n.PropTypes.number])},getDefaultProps:function(){return{placeholder:"Add new tag",tags:[],suggestions:[],delimeters:[i.ENTER,i.TAB],autofocus:!0,inline:!0,allowDeleteFromEmptyInput:!0,minQueryLength:2,autocomplete:!1}},componentDidMount:function(){this.props.autofocus&&this.refs.input.focus()},getInitialState:function(){return{suggestions:this.props.suggestions,query:"",selectedIndex:-1,selectionMode:!1}},filteredSuggestions:function(e,t){return t.filter(function(t){return 0===t.toLowerCase().indexOf(e.toLowerCase())})},componentWillReceiveProps:function(e){var t=this.filteredSuggestions(this.state.query,e.suggestions);this.setState({suggestions:t})},handleDelete:function(e,t){this.props.handleDelete(e),this.setState({query:""})},handleChange:function(e){this.props.handleInputChange&&this.props.handleInputChange(e.target.value.trim());var t=e.target.value.trim(),s=this.filteredSuggestions(t,this.props.suggestions);this.setState({query:t,suggestions:s})},handleKeyDown:function(e){var t=this.state,s=t.query,n=t.selectedIndex,o=t.suggestions;if(e.keyCode===i.ESCAPE&&(e.preventDefault(),this.setState({selectedIndex:-1,selectionMode:!1,suggestions:[]})),-1!==this.props.delimeters.indexOf(e.keyCode)&&((e.keyCode!==i.TAB||""!==s)&&e.preventDefault(),""!==s&&(this.state.selectionMode&&(s=this.state.suggestions[this.state.selectedIndex]),this.addTag(s))),e.keyCode===i.BACKSPACE&&""==s&&this.props.allowDeleteFromEmptyInput&&this.handleDelete(this.props.tags.length-1),e.keyCode===i.UP_ARROW){e.preventDefault();var n=this.state.selectedIndex;0>=n?this.setState({selectedIndex:this.state.suggestions.length-1,selectionMode:!0}):this.setState({selectedIndex:n-1,selectionMode:!0})}e.keyCode===i.DOWN_ARROW&&(e.preventDefault(),this.setState({selectedIndex:(this.state.selectedIndex+1)%o.length,selectionMode:!0}))},addTag:function(e){var t=this.refs.input;if(this.props.autocomplete){var s=this.filteredSuggestions(e,this.props.suggestions);(1===this.props.autocomplete&&1===s.length||this.props.autocomplete===!0)&&(e=s[0])}this.props.handleAddition(e),this.setState({query:"",selectionMode:!1,selectedIndex:-1}),t.value="",t.focus()},handleSuggestionClick:function(e,t){this.addTag(this.state.suggestions[e])},handleSuggestionHover:function(e,t){this.setState({selectedIndex:e,selectionMode:!0})},render:function(){var e=this.props.tags.map(function(e,t){return n.createElement(o,{key:e.id,tag:e,labelField:this.props.labelField,onDelete:this.handleDelete.bind(this,t),removeComponent:this.props.removeComponent})}.bind(this)),t=this.state.query.trim(),s=this.state.selectedIndex,i=this.state.suggestions,a=this.props.placeholder,p=n.createElement("div",{className:"ReactTags__tagInput"},n.createElement("input",{ref:"input",type:"text",placeholder:a,"aria-label":a,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),n.createElement(r,{query:t,suggestions:i,selectedIndex:s,handleClick:this.handleSuggestionClick,handleHover:this.handleSuggestionHover,minQueryLength:this.props.minQueryLength}));return n.createElement("div",{className:"ReactTags__tags"},n.createElement("div",{className:"ReactTags__selected"},e,this.props.inline&&p),!this.props.inline&&p)}});e.exports={WithOutContext:a,Keys:i}},function(t,s){t.exports=e},function(e,t,s){"use strict";var n=s(1),o=n.createClass({displayName:"Suggestions",propTypes:{query:n.PropTypes.string.isRequired,selectedIndex:n.PropTypes.number.isRequired,suggestions:n.PropTypes.array.isRequired,handleClick:n.PropTypes.func.isRequired,handleHover:n.PropTypes.func.isRequired,minQueryLength:n.PropTypes.number},markIt:function(e,t){var s=t.trim().replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),n=RegExp(s,"gi");return{__html:e.replace(n,"<mark>$&</mark>")}},render:function(){var e=this.props,t=this.props.suggestions.map(function(t,s){return n.createElement("li",{key:s,onClick:e.handleClick.bind(null,s),onMouseOver:e.handleHover.bind(null,s),className:s==e.selectedIndex?"active":""},n.createElement("span",{dangerouslySetInnerHTML:this.markIt(t,e.query)}))}.bind(this)),s=e.minQueryLength||2;return 0===t.length||e.query.length<s?n.createElement("div",{className:"ReactTags__suggestions"}," "):n.createElement("div",{className:"ReactTags__suggestions"},n.createElement("ul",null," ",t," "))}});e.exports=o},function(e,t,s){"use strict";var n=s(1),o=n.createClass({displayName:"Tag",propTypes:{labelField:n.PropTypes.string,onDelete:n.PropTypes.func.isRequired,tag:n.PropTypes.object.isRequired,removeComponent:n.PropTypes.func},getDefaultProps:function(){return{labelField:"text"}},render:function(){var e=this.props.tag[this.props.labelField],t=this.props.removeComponent,s=n.createClass({displayName:"RemoveComponent",render:function(){return t?n.createElement(t,this.props):n.createElement("a",this.props,"x")}});return n.createElement("span",{className:"ReactTags__tag"},e,n.createElement(s,{className:"ReactTags__remove",onClick:this.props.onDelete}))}});e.exports=o},function(e,s){e.exports=t}])});